name: Process Contact Form
on:
  repository_dispatch:
    types: [contact_form]
jobs:
  process:
    runs-on: ubuntu-latest
    steps:
    - name: Send email
      uses: dawidd6/action-send-mail@v3
      with:
        server_address: smtp.gmail.com
        server_port: 465
        username: ${{secrets.MAIL_USERNAME}}
        password: ${{secrets.MAIL_PASSWORD}}
        subject: Nouveau message de portfolio
        body: |-
          Nom: ${{github.event.client_payload.name}}
          Email: ${{github.event.client_payload.email}}
          Message: ${{github.event.client_payload.message}}
        to: sergie.king5@gmail.com
        from: Portfolio Contact
